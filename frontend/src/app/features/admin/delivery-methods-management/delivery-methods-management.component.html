<div class="container mx-auto px-4 py-8">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold text-dark">Gestion des modes de livraison</h1>
    <button 
      mat-raised-button 
      color="primary"
      (click)="openAddDialog()">
      <mat-icon>add</mat-icon>
      <span class="ml-2">Ajouter une méthode</span>
    </button>
  </div>

  <!-- Delivery Methods Table -->
  <div class="bg-white rounded-lg shadow overflow-hidden" *ngIf="!loading">
    <table mat-table [dataSource]="deliveryMethods" class="w-full">
      <!-- Name Column -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Nom</th>
        <td mat-cell *matCellDef="let method" class="font-semibold text-dark">
          {{ method.name }}
        </td>
      </ng-container>

      <!-- Description Column -->
      <ng-container matColumnDef="description">
        <th mat-header-cell *matHeaderCellDef>Description</th>
        <td mat-cell *matCellDef="let method" class="text-gray-600">
          {{ method.description || '-' }}
        </td>
      </ng-container>

      <!-- Cost Column -->
      <ng-container matColumnDef="cost">
        <th mat-header-cell *matHeaderCellDef>Coût</th>
        <td mat-cell *matCellDef="let method" class="font-semibold text-primary">
          {{ formatPrice(method.cost) }}
        </td>
      </ng-container>

      <!-- Estimated Days Column -->
      <ng-container matColumnDef="estimatedDays">
        <th mat-header-cell *matHeaderCellDef>Délai estimé</th>
        <td mat-cell *matCellDef="let method" class="text-gray-600">
          {{ method.estimatedDays ? method.estimatedDays + ' jour(s)' : '-' }}
        </td>
      </ng-container>

      <!-- Active Column -->
      <ng-container matColumnDef="isActive">
        <th mat-header-cell *matHeaderCellDef>Actif</th>
        <td mat-cell *matCellDef="let method">
          <span [class]="method.isActive ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'" 
                class="px-2 py-1 rounded text-xs font-medium">
            {{ method.isActive ? 'Oui' : 'Non' }}
          </span>
        </td>
      </ng-container>

      <!-- Actions Column -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let method">
          <button 
            mat-icon-button 
            color="primary"
            (click)="openAddDialog(method)"
            matTooltip="Modifier">
            <mat-icon>edit</mat-icon>
          </button>
          <button 
            mat-icon-button 
            [color]="method.isActive ? 'warn' : 'primary'"
            (click)="toggleActive(method)"
            [matTooltip]="method.isActive ? 'Désactiver' : 'Activer'">
            <mat-icon>{{ method.isActive ? 'toggle_on' : 'toggle_off' }}</mat-icon>
          </button>
          <button 
            mat-icon-button 
            color="warn"
            (click)="deleteMethod(method)"
            matTooltip="Supprimer">
            <mat-icon>delete</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    <div *ngIf="deliveryMethods.length === 0" class="text-center py-12 text-gray-500">
      <mat-icon class="text-6xl mb-4">local_shipping</mat-icon>
      <p>Aucune méthode de livraison</p>
      <button 
        mat-raised-button 
        color="primary"
        (click)="openAddDialog()"
        class="mt-4">
        Ajouter la première méthode
      </button>
    </div>
  </div>

  <div *ngIf="loading" class="text-center py-12">
    <mat-icon class="animate-spin text-4xl text-primary">refresh</mat-icon>
    <p class="mt-4 text-gray-600">Chargement...</p>
  </div>
</div>

